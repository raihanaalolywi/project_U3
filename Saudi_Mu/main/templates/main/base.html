{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <style>
    /* Hide Google Translate Bar */
    body {
        top: 0 !important;
    }
    
    .goog-te-banner-frame {
        display: none !important;
    }
    
    .skiptranslate {
        display: none !important;
    }
    
    body > .skiptranslate {
        display: none !important;
    }
    
    iframe.skiptranslate {
        display: none !important;
    }
    
    /* Remove the top spacing Google Translate adds */
    .goog-te-banner-frame.skiptranslate {
        display: none !important;
    }

    /* Language Button */
    .icon-btn {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.2rem;
        margin-left: 0.5rem;
    }

    /* Dropdown */
    .dropdown { 
        position: relative; 
        display: inline-block; 
    }
    
    .dropdown-content {
        display: none;
        position: absolute;
        right: 0;
        background-color: white;
        min-width: 100px;
        box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
        z-index: 9999;
        border-radius: 6px;
        overflow: hidden;
    }
    
    .dropdown-content button {
        width: 100%;
        border: none;
        background: none;
        padding: 8px 12px;
        cursor: pointer;
        text-align: right;
    }
    
    .dropdown-content button:hover {
        background-color: #f1f1f1;
    }
    
    .dropdown.show .dropdown-content {
        display: block;
    }
    </style>
</head>
<body>

<nav class="base-navbar">

    <div class="base-left">
        <span class="base-logo">Saudi Museum</span>
    </div>

    <div class="base-center">
        <a class="base-link" href="{% url 'home' %}">Home</a>
        <a class="base-link" href="{% url 'add_authority' %}">Add Authority</a>
        <a class="base-link" href="{% url 'all_del_museum' %}">All Museums</a>
        <a class="base-link" href="{% url 'booking' %}">Booking</a>
        <a class="base-link" href="{% url 'contact_us' %}">Contact Us</a>
    </div>

    <div class="base-right">

        <!-- Language Dropdown -->
        <div class="dropdown">
            <button class="icon-btn" id="languageBtn">üåê</button>
            <div class="dropdown-content">
                <button onclick="doTranslate('en')">English</button>
                <button onclick="doTranslate('ar')">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
            </div>
        </div>

        {% if user.is_authenticated and user.profile.avatar %}
            <a class="profile-link" href="{% url 'account:user_profile_view' user_name=user.username %}">
                <img src="{{ user.profile.avatar.url }}" alt="Avatar" class="nav-avatar">
                <span class="nav-username">{{ user.username }}</span>
            </a>

            <a class="icon-btn" href="{% url 'account:log_out' %}">Logout</a>
        {% else %}
            <a class="icon-btn" href="{% url 'account:sign_in' %}">Sign In</a>
            <a class="icon-btn" href="{% url 'account:sign_up' %}">Sign Up</a>
        {% endif %}

    </div>

</nav>

{% block content %}{% endblock %}

<!-- Google Translate Hidden -->
<div id="google_translate_element" style="display:none;"></div>

<script type="text/javascript">
function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

// Additional script to remove Google Translate bar
window.addEventListener('load', function() {
    // Remove the Google Translate bar
    var translateBar = document.querySelector('.goog-te-banner-frame');
    if (translateBar) {
        translateBar.style.display = 'none';
    }
    
    // Reset body top position
    document.body.style.top = '0';
    document.body.style.position = 'static';
});
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
const dropdown = document.querySelector('.dropdown');
const btn = document.getElementById('languageBtn');

btn.addEventListener('click', () => {
    dropdown.classList.toggle('show');
});

// Translation function using cookie
function doTranslate(lang) {
    document.cookie = "googtrans=/en/" + lang + ";path=/";
    location.reload();
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    if (!dropdown.contains(event.target)) {
        dropdown.classList.remove('show');
    }
});
</script>

</body>
</html>